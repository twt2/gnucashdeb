Author: Dmitry Smirnov <onlyjob@member.fsf.org>
Last-Update: 2017-11-18
Forwarded: not-needed
Description: Disable supression of fortify hardening flag.
 Wirh --enable-debug upstream build system removes '-02' argument
 from CFLAGS and therefore prevent fortification.
 This patch disable dropping build flags from CFLAGS.
 .
 Note: although according to blhc (see http://ruderich.org/simon/blhc/)
 fortify flag is present there are still some real false-positives
 from lintian i.e. W:hardening-no-fortify-functions.

--- a/configure.ac
+++ b/configure.ac
@@ -764,15 +764,8 @@
 AC_ARG_ENABLE( debug,
   [AS_HELP_STRING([--enable-debug],[compile with debugging flags set])],
   [
   if test x$enableval = xyes; then
-     # remove any optimization flags...
-     CFLAGS=`echo ${CFLAGS} | sed -e 's,-O.,,g'`
-     # ...except for those the user wants.
-     CFLAGS="${CFLAGS} -g ${USER_OPTIMIZATION}"
-     # Do the same for C++
-     CXXFLAGS=`echo ${CXXFLAGS} | sed -e 's,-O.,,g'`
-     CXXFLAGS="${CXXFLAGS} -g ${USER_OPTIMIZATION}"
      LDFLAGS="${LDFLAGS} -g"
   fi
   ])
 
